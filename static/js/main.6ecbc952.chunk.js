(this["webpackJsonpfemi-covid"]=this["webpackJsonpfemi-covid"]||[]).push([[0],{40:function(e,t,n){},574:function(e,t){},578:function(e,t){},580:function(e,t){},590:function(e,t){},592:function(e,t){},619:function(e,t){},621:function(e,t){},622:function(e,t){},627:function(e,t){},629:function(e,t){},636:function(e,t){},655:function(e,t){},667:function(e,t){},670:function(e,t){},673:function(e,t,n){},675:function(e,t,n){"use strict";n.r(t);var r=n(2),a=n.n(r),c=n(247),s=n.n(c),o=n(87),u=n(5),i=n(39),l=n(8),d=(n(40),n(7)),p=n.n(d),b=n(136),j=n(15),O=(n(256),n(249)),h=n.n(O).a.create({baseURL:"https://magenavot-be-prd.femimoh.co.il/femiCovidSampellingForNursingHome/1.0.0"}),f=function(e){return{headers:{"content-type":"application/json",Authorization:"Bearer "+e}}},g=function(){var e=JSON.parse(localStorage.getItem("currUser")).token;return h.get("/lookup/patientRoles",f(e))},x=function(){var e=JSON.parse(localStorage.getItem("currUser")).token;return h.get("/lookup/kupas",f(e))};function v(){return(v=Object(j.a)(p.a.mark((function e(t){var n,r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,g();case 2:n=e.sent.data,r=Object(b.a)(n),e.prev=4,r.s();case 6:if((a=r.n()).done){e.next=12;break}if((c=a.value).id!==t){e.next=10;break}return e.abrupt("return",c);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})))).apply(this,arguments)}function m(){return(m=Object(j.a)(p.a.mark((function e(t){var n,r,a,c;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,x();case 2:n=e.sent.data,r=Object(b.a)(n),e.prev=4,r.s();case 6:if((a=r.n()).done){e.next=12;break}if((c=a.value).id!==t){e.next=10;break}return e.abrupt("return",c);case 10:e.next=6;break;case 12:e.next=17;break;case 14:e.prev=14,e.t0=e.catch(4),r.e(e.t0);case 17:return e.prev=17,r.f(),e.finish(17);case 20:return e.abrupt("return",null);case 21:case"end":return e.stop()}}),e,null,[[4,14,17,20]])})))).apply(this,arguments)}var k={coordsId:"9afaf80e-6026-4ba9-b439-27722bb48f46",otp:function(e){return h.post("/OTPRquest",e)},login:function(e){return h.post("/logIn",e)},createTium:function(e){var t=JSON.parse(localStorage.getItem("currUser")).token;return h.post("/coordination",e,f(t))},findClient:function(e){var t=JSON.parse(localStorage.getItem("currUser")).token;return h.get("/patient/recurent/1/".concat(e,"/"),f(t))},createTask:function(e){var t=JSON.parse(localStorage.getItem("currUser")).token;return h.post("/tasks",e,f(t))},getTaskById:function(){var e=JSON.parse(localStorage.getItem("currUser")).token;return h.get("/tasks/5a5ffb39-f464-4efb-99a9-d72dc7f8c934",f(e))},validateTube:function(e){var t=JSON.parse(localStorage.getItem("currUser")).token;return h.get("/validations/barcodes/test-tube/".concat(e),f(t))},validateCooler:function(e){var t=JSON.parse(localStorage.getItem("currUser")).token;return h.post("/delivery/coolerBarcode?secondOnly=true",f(t),{barcode:e})},addRec:function(e){var t={source:e.source,exposeAbroad:!1,closeContact:!1,otherReason:!0,cough:!1,fever:!1,otherBreathingSympt:!1,symptStart:"1900-01-01",exposerCountry:"",leavingDate:"1900-01-01",otherReasonNotes:"\u05d2",otherBreathingSymptNotes:"",testTubeBarCode:e.tubeId,containerBarCode:e.coolerId,poolingType:2,poolingComplete:1,tubeBarcode:e.tubeId,CoolerBarcode:e.coolerId,poolingSampleBarcode:e.igumId},n=JSON.parse(localStorage.getItem("currUser")).token;return h.post("/test/".concat(e.source,"?isDraft=false"),t,f(n))},getCoordination:function(e){var t=JSON.parse(localStorage.getItem("currUser")).token;return h.get("/coordination/".concat(e),f(t))},getRole:function(e){return v.apply(this,arguments)},getKupa:function(e){return m.apply(this,arguments)},getClients:function(e){var t=JSON.parse(localStorage.getItem("currUser")).token;return h.get("/tasks/coordination/".concat(e),f(t))},getInstitutions:function(){var e=JSON.parse(localStorage.getItem("currUser")).token;return h.get("/lookup/institutes",f(e))},validateIgum:function(e,t){var n=JSON.parse(localStorage.getItem("currUser")).token;return h.get("/validations/barcodes/pooling/".concat(e,"?coolerBarcode=").concat(t,"&excludeTestId=").concat("e395d04b-41d3-441d-849a-c4f091b64019"),f(n))}},S=k,I=n(1);function N(e){var t=e.idNum,n=e.phone,a=e.setIdNum,c=e.setPhone,s=Object(l.g)(),o=Object(r.useState)(""),i=Object(u.a)(o,2),d=i[0],p=i[1];return Object(I.jsxs)("div",{className:"otp-wrapper",children:[Object(I.jsx)("h1",{children:"Please Log In"}),Object(I.jsxs)("div",{children:[Object(I.jsx)("button",{onClick:function(){return s.push("/test")},children:"camera"}),Object(I.jsxs)("label",{children:[Object(I.jsx)("p",{children:"id"}),Object(I.jsx)("input",{type:"text",placeholder:"setIdNum",onChange:function(e){return a(e.target.value)}})]}),Object(I.jsxs)("label",{children:[Object(I.jsx)("p",{children:"phone"}),Object(I.jsx)("input",{type:"text",placeholder:"phone",onChange:function(e){return c(e.target.value)}})]}),Object(I.jsx)("div",{children:Object(I.jsx)("button",{onClick:function(e){S.otp({idNum:t,phone:n}).then((function(e){console.log(e.data),p(""),s.push("/login")})).catch((function(e){e.response&&e.response.data&&(console.log(e.response.data.message),p(e.response.data.message))}))},children:"Submit"})}),Object(I.jsx)("span",{className:"err-message",children:d})]})]})}function C(e){var t=e.idNum,n=e.phone,a=Object(l.g)(),c=Object(r.useState)(""),s=Object(u.a)(c,2),o=s[0],i=s[1],d=Object(r.useState)(""),p=Object(u.a)(d,2),b=p[0],j=p[1];return Object(I.jsxs)("div",{className:"otp-wrapper",children:[Object(I.jsx)("h1",{children:" Please Log In"}),Object(I.jsx)("input",{type:"text",placeholder:"setOtp",onChange:function(e){return i(e.target.value)}}),Object(I.jsx)("button",{onClick:function(e){var r={idNum:t,otp:o,phone:n};S.login(r).then((function(e){200!==e.status?j("error"):(j(""),localStorage.setItem("currUser",JSON.stringify(e.data)),a.push("/dashboard"),console.log(e.data))})).catch((function(e){e.response&&e.response.data&&(console.log(e.response.data.message),j(e.response.data.message))}))},children:"Submit"}),Object(I.jsx)("span",{className:"err-message",children:b})]})}var y=n(251),w=n.n(y);function T(e){var t=e.source,n=Object(l.g)(),a=Object(r.useState)(""),c=Object(u.a)(a,2),s=c[0],o=c[1],i=Object(r.useState)(""),d=Object(u.a)(i,2),b=d[0],O=d[1],h=Object(r.useState)(""),f=Object(u.a)(h,2),g=f[0],x=f[1],v=Object(r.useState)(""),m=Object(u.a)(v,2),k=m[0],N=m[1];function C(e){return y.apply(this,arguments)}function y(){return y=Object(j.a)(p.a.mark((function e(t){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.validateTube(t);case 2:if(1!=e.sent.data){e.next=5;break}return e.abrupt("return",!0);case 5:return N("tube err"),e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)}))),y.apply(this,arguments)}function w(){return T.apply(this,arguments)}function T(){return(T=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.validateTube(b);case 2:if(1!=e.sent.data){e.next=5;break}return e.abrupt("return",!0);case 5:return N("cooler err"),e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function U(){return J.apply(this,arguments)}function J(){return(J=Object(j.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,S.validateIgum(g,b);case 2:if(204!=e.sent.status){e.next=5;break}return e.abrupt("return",!0);case 5:return N("igum err"),e.abrupt("return",!1);case 7:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function B(){return(B=Object(j.a)(p.a.mark((function e(){var r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("hola"),r={source:t,tubeId:s,coolerId:b,igumId:g},e.prev=2,e.next=5,C(s);case 5:if(!e.sent){e.next=16;break}return e.next=8,w(b);case 8:if(!e.sent){e.next=16;break}return e.next=11,U(g,b);case 11:if(!e.sent){e.next=16;break}return e.next=14,S.addRec(r);case 14:200===(a=e.sent).status?n.push("/clients"):N(a.status);case 16:e.next=21;break;case 18:e.prev=18,e.t0=e.catch(2),N(e.t0.response);case 21:case"end":return e.stop()}}),e,null,[[2,18]])})))).apply(this,arguments)}return Object(r.useEffect)((function(){O(localStorage.getItem("coolerId")),x(localStorage.getItem("igumId"))}),[]),Object(I.jsx)("div",{children:Object(I.jsxs)("div",{className:"cols",children:[Object(I.jsx)("input",{type:"text",placeholder:"tubeId",maxlength:"9",onChange:function(e){return o(e.target.value)}}),Object(I.jsx)("input",{type:"text",placeholder:"coolerId",maxlength:"11",onChange:function(e){O(e.target.value),localStorage.setItem("coolerId",e.target.value)},value:b}),Object(I.jsx)("input",{type:"text",placeholder:"igumId",maxlength:"9",onChange:function(e){x(e.target.value),localStorage.setItem("igumId",e.target.value)},value:g}),Object(I.jsx)("button",{onClick:function(){return B.apply(this,arguments)},children:"add client"}),Object(I.jsx)("p",{children:k})]})})}function U(e){var t=e.totalTests,n=Object(r.useState)(""),a=Object(u.a)(n,2),c=a[0],s=a[1],i=Object(r.useState)(""),l=Object(u.a)(i,2),d=l[0],b=l[1],O=Object(r.useState)(""),h=Object(u.a)(O,2),f=h[0],g=h[1],x=Object(r.useState)(""),v=Object(u.a)(x,2),m=v[0],k=v[1],N=Object(r.useState)(!1),C=Object(u.a)(N,2),y=C[0],U=C[1],J=Object(r.useState)(""),B=Object(u.a)(J,2),R=B[0],P=B[1],E=Object(r.useState)(""),A=Object(u.a)(E,2),D=(A[0],A[1]);function F(e){return console.log("extra fields"),{assignedTester:JSON.parse(localStorage.getItem("currUser")).id,femiCode:"",isUrgent:!1,kupaReferenceId:"",requestTime:e,status:0,supplierCode:"",supplierDesc:""}}function V(e,t){return L.apply(this,arguments)}function L(){return(L=Object(j.a)(p.a.mark((function e(t,n){var r,a,c,s,u;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=w.a.create("1EEA6DC-JAM4DP2-PHVYPBN-V0XCJ9X"),console.log(r),a=Object(o.a)({},t),c=r.iv,P(c),a.source=c,e.next=8,S.getRole(a.role);case 8:return s=e.sent,a.role=s,e.next=12,S.getKupa(a.kupa);case 12:return a.kupa=e.sent,e.next=15,S.getCoordination(S.coordsId);case 15:return u=e.sent,a.institute=u.data.institute,a.coordination=u.data,delete(a=Object.assign(a,F(n))).lastUpdated,delete a.phone2,delete a.phoneAreaCode2,delete a.email,delete a.email2,console.log(a),e.abrupt("return",a);case 26:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function X(){return(X=Object(j.a)(p.a.mark((function e(){var t,n,r,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.findClient(c);case 3:204===(r=e.sent).status?k("cannot find the data"):(b(r.data.firstName),g(r.data.lastName),console.log("date"),console.log(r.data.lastUpdated+"Z"),console.log("date"),D(r.data.lastUpdated+"Z"),k(""),t=r.data,U(!0)),e.next=11;break;case 7:e.prev=7,e.t0=e.catch(0),console.log(e.t0.status),e.t0.response&&e.t0.response.data?(console.log(e.t0.response.data.message),k(e.t0.response.data.message)):k("something went wrong");case 11:if(e.prev=11,!t){e.next=19;break}return e.next=15,V(t,r.data.lastUpdated);case 15:n=e.sent,console.log("object"),console.log(n),console.log("object");case 19:e.next=25;break;case 21:e.prev=21,e.t1=e.catch(11),console.log(e.t1),k(e.t1.status);case 25:if(e.prev=25,!n){e.next=31;break}return e.next=29,S.createTask(n);case 29:a=e.sent,console.log(a.data);case 31:e.next=36;break;case 33:e.prev=33,e.t2=e.catch(25),console.log(e.t2);case 36:case"end":return e.stop()}}),e,null,[[0,7],[11,21],[25,33]])})))).apply(this,arguments)}return Object(I.jsxs)("div",{className:"otp-wrapper",children:[Object(I.jsxs)("p",{children:["totalTests: ",t]}),Object(I.jsxs)("p",{children:["cooler amount: ",t%50]}),Object(I.jsxs)("p",{children:["Igum amount: ",t%15]}),Object(I.jsx)("h1",{children:"add client page"}),Object(I.jsx)("input",{type:"text",placeholder:"id",defaultValue:"30062858",onChange:function(e){return s(e.target.value)}}),Object(I.jsx)("button",{onClick:function(){return X.apply(this,arguments)},children:"find client"}),Object(I.jsx)("p",{children:d}),Object(I.jsx)("p",{children:f}),Object(I.jsx)("p",{className:"err-message",children:m}),y&&Object(I.jsx)(T,{source:R})]})}function J(e){var t=e.totalTests,n=Object(l.g)();return Object(I.jsxs)("div",{className:"otp-wrapper",children:[Object(I.jsx)("button",{onClick:function(e){return n.push("/clients")},children:"client list"}),Object(I.jsx)("h1",{children:"Covid app"}),Object(I.jsx)(U,{totalTests:t})]})}function B(e){var t=e.firstName,n=e.lastName;return Object(I.jsxs)("div",{children:[Object(I.jsx)("p",{children:t}),Object(I.jsx)("p",{children:n}),Object(I.jsx)("hr",{})]})}function R(e){var t=e.setTotalTests,n=Object(r.useState)([]),a=Object(u.a)(n,2),c=a[0],s=a[1],o=Object(r.useState)([]),i=Object(u.a)(o,2),d=i[0],b=i[1],O=Object(r.useState)(!0),h=Object(u.a)(O,2),f=h[0],g=h[1],x=Object(r.useState)(0),v=Object(u.a)(x,2),m=v[0],k=v[1],N=[],C=Object(l.g)();function y(e){var t=(c.length>0?c:N).filter((function(t){return e.includes(t.status)}));b(t),k(t.length)}function w(e){g(!!e.includes(2)),y(e)}return Object(r.useEffect)(Object(j.a)(p.a.mark((function e(){var n;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getClients(S.coordsId);case 3:n=e.sent,N=n.data,console.log(N),s(N),t(N.length),y([2,4]),e.next=14;break;case 11:e.prev=11,e.t0=e.catch(0),console.log(e.t0.response);case 14:case"end":return e.stop()}}),e,null,[[0,11]])}))),[]),Object(I.jsxs)("div",{children:[Object(I.jsx)("button",{onClick:function(e){return C.push("/dashboard")},children:"+"}),Object(I.jsxs)("div",{className:"rows",children:[Object(I.jsx)("button",{style:{backgroundColor:f?"blue":""},onClick:function(){return w([2,4])},children:"complete"}),Object(I.jsx)("button",{style:{backgroundColor:f?"":"blue"},onClick:function(){return w([0,1])},children:"not complete"}),Object(I.jsxs)("p",{children:["done : ",m]})]}),Object(I.jsx)("div",{className:"rows",children:Object(I.jsx)("div",{className:"cols",children:d.map((function(e,t){return Object(I.jsx)(B,{firstName:e.firstName,lastName:e.lastName},t)}))})})]})}var P=function(){var e=Object(r.useState)("Not Found"),t=Object(u.a)(e,2),n=t[0],a=(t[1],Object(r.useState)(!1)),c=Object(u.a)(a,2),s=c[0],o=c[1];return Object(I.jsxs)(I.Fragment,{children:[Object(I.jsx)("button",{onClick:function(){return o(!0)},children:"Scan Barcodes"}),s&&Object(I.jsx)(I.Fragment,{children:Object(I.jsx)("button",{onClick:function(){return o(!1)},children:"X"})}),Object(I.jsx)("p",{children:n})]})};function E(){var e=Object(l.g)(),t=Object(r.useState)([]),n=Object(u.a)(t,2),a=(n[0],n[1]),c=Object(r.useState)(""),s=Object(u.a)(c,2),o=(s[0],s[1]);return Object(r.useEffect)(Object(j.a)(p.a.mark((function e(){var t;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,S.getInstitutions();case 3:t=e.sent,a(t.data),console.log(t.data),console.log(typeof t.data),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),console.log(e.t0);case 12:case"end":return e.stop()}}),e,null,[[0,9]])}))),[]),Object(I.jsxs)("div",{className:"otp-wrapper",children:[Object(I.jsx)("button",{onClick:function(){return e.push("/dashboard")},children:"add client"}),Object(I.jsx)("input",{type:"text",onChange:function(e){return o(e.target.value)}}),Object(I.jsx)("div",{children:"tnirntinrsietnsir"}),Object(I.jsxs)("select",{id:"inst",name:"inst",children:[Object(I.jsx)("option",{value:"volvo",children:"Volvo"}),Object(I.jsx)("option",{value:"saab",children:"Saab"}),void 0]})]})}var A=function(){var e=Object(r.useState)("300628583"),t=Object(u.a)(e,2),n=t[0],a=t[1],c=Object(r.useState)("0542226958"),s=Object(u.a)(c,2),d=s[0],p=s[1],b=Object(r.useState)(!1),j=Object(u.a)(b,2),O=j[0],h=(j[1],Object(r.useState)(123)),f=Object(u.a)(h,2),g=f[0],x=f[1];Object(r.useEffect)((function(){}),[]);var v={idNum:n,phone:d,setIdNum:a,setPhone:p};return Object(I.jsx)(i.a,{children:Object(I.jsxs)(l.d,{children:[Object(I.jsx)(l.b,{exact:!0,path:"/",children:O?Object(I.jsx)(l.a,{to:"/dashboard"}):Object(I.jsx)(N,Object(o.a)({},v))}),Object(I.jsx)(l.b,{path:"/dashboard",children:Object(I.jsx)(J,{totalTests:g})}),Object(I.jsx)(l.b,{path:"/test",children:Object(I.jsx)(P,{})}),Object(I.jsx)(l.b,{path:"/login",children:Object(I.jsx)(C,{idNum:n,phone:d})}),Object(I.jsx)(l.b,{path:"/clients",children:Object(I.jsx)(R,{setTotalTests:x})}),Object(I.jsx)(l.b,{path:"/tium",children:Object(I.jsx)(E,{})})]})})};n(673);s.a.render(Object(I.jsx)(a.a.StrictMode,{children:Object(I.jsx)(A,{})}),document.getElementById("root"))}},[[675,1,2]]]);
//# sourceMappingURL=main.6ecbc952.chunk.js.map